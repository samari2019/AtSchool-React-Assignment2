{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useCallback, useReducer } from \"react\";\n\n// The state initial state\nconst initialState = {\n  isLoding: false,\n  error: {\n    hasError: false,\n    message: \"\"\n  }\n};\n\n// The function triggered when the dispatchFn fro the useReducer is called\nconst fetchReducer = (state, action) => {\n  if (action.type === \"LOADING\") {\n    const updatedState = {\n      ...state,\n      isLoading: action.value\n    };\n    return updatedState;\n  }\n  if (action.type === \"ERROR\") {\n    const updatedState = {\n      ...state,\n      error: action.value\n    };\n    return updatedState;\n  }\n  return state;\n};\n\n// Cretaing a custom hook\nconst useFetch = () => {\n  _s();\n  const [fetchState, dispatchFn] = useReducer(fetchReducer, initialState);\n\n  // A fuction to close the error modal.\n  const closeModal = () => {\n    dispatchFn({\n      type: \"ERROR\",\n      value: {\n        hasError: false,\n        message: \"\"\n      }\n    });\n  };\n\n  // The function to send the fetch request. is it expecting a configuration object as well as a function that will get the request transformed data\n  const fetchRequest = useCallback(async function (configObj) {\n    let getData = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : () => {};\n    dispatchFn({\n      type: \"LOADING\",\n      value: true\n    });\n    dispatchFn({\n      type: \"ERROR\",\n      value: {\n        hasError: false,\n        message: \"\"\n      }\n    });\n    try {\n      const response = await fetch(configObj.url);\n      if (!response.ok) {\n        throw new Error(`Something went wrong!`);\n      }\n\n      // Retrieving the body data\n      const responseBody = await response.json();\n\n      // Formatting the body data to what I need\n      const transformedData = [];\n      for (const student of responseBody.results) {\n        transformedData.push({\n          id: student.id.value,\n          name: `${student.name.first} ${student.name.last}`,\n          email: student.email,\n          img: student.picture.medium\n        });\n      }\n      // Sending the data to the component that send the request\n      getData(transformedData);\n    } catch (error) {\n      dispatchFn({\n        type: \"ERROR\",\n        value: {\n          hasError: true,\n          message: err.message\n        }\n      });\n    }\n    dispatchFn({\n      type: \"LOADING\",\n      value: false\n    });\n  }, []);\n\n  // Destructuring the sate\n  const {\n    isLoading,\n    error\n  } = fetchState;\n  // Data that can be gotten from this custom hook\n  return {\n    isLoading,\n    error,\n    closeModal,\n    fetchRequest\n  };\n};\n_s(useFetch, \"RgE1HlSj92TXMqItEFRdn6xqTGQ=\");\nexport default useFetch;","map":{"version":3,"names":["useCallback","useReducer","initialState","isLoding","error","hasError","message","fetchReducer","state","action","type","updatedState","isLoading","value","useFetch","fetchState","dispatchFn","closeModal","fetchRequest","configObj","getData","response","fetch","url","ok","Error","responseBody","json","transformedData","student","results","push","id","name","first","last","email","img","picture","medium","err"],"sources":["C:/Users/SONIA/AltSchool-Assignment2/React-App/my-app/src/useFetch.js"],"sourcesContent":["import { useCallback, useReducer } from \"react\";\r\n\r\n// The state initial state\r\nconst initialState = {\r\n  isLoding: false,\r\n  error: {\r\n    hasError: false,\r\n    message: \"\",\r\n  },\r\n};\r\n\r\n// The function triggered when the dispatchFn fro the useReducer is called\r\nconst fetchReducer = (state, action) => {\r\n  if (action.type === \"LOADING\") {\r\n    const updatedState = { ...state, isLoading: action.value };\r\n    return updatedState;\r\n  }\r\n  if (action.type === \"ERROR\") {\r\n    const updatedState = {\r\n      ...state,\r\n      error: action.value,\r\n    };\r\n    return updatedState;\r\n  }\r\n  return state;\r\n};\r\n\r\n// Cretaing a custom hook\r\nconst useFetch = () => {\r\n  const [fetchState, dispatchFn] = useReducer(fetchReducer, initialState);\r\n\r\n  // A fuction to close the error modal.\r\n  const closeModal = () => {\r\n    dispatchFn({ type: \"ERROR\", value: { hasError: false, message: \"\" } });\r\n  };\r\n\r\n  // The function to send the fetch request. is it expecting a configuration object as well as a function that will get the request transformed data\r\n  const fetchRequest = useCallback(\r\n    async (configObj, getData = () => {}) => {\r\n      dispatchFn({ type: \"LOADING\", value: true });\r\n      dispatchFn({ type: \"ERROR\", value: { hasError: false, message: \"\" } });\r\n      try {\r\n        const response = await fetch(configObj.url)\r\n\r\n        if (!response.ok) {\r\n          throw new Error(`Something went wrong!`);\r\n        }\r\n\r\n        // Retrieving the body data\r\n        const responseBody = await response.json();\r\n\r\n        // Formatting the body data to what I need\r\n        const transformedData = [];\r\n        for (const student of responseBody.results) {\r\n          transformedData.push({\r\n            id: student.id.value,\r\n            name: `${student.name.first} ${student.name.last}`,\r\n            email: student.email,\r\n            img: student.picture.medium,\r\n    \r\n          });\r\n        }\r\n        // Sending the data to the component that send the request\r\n        getData(transformedData);\r\n      } catch (error) {\r\n        dispatchFn({\r\n          type: \"ERROR\",\r\n          value: { hasError: true, message: err.message },\r\n        });\r\n      }\r\n      dispatchFn({ type: \"LOADING\", value: false });\r\n    },\r\n    []\r\n  );\r\n\r\n  // Destructuring the sate\r\n  const { isLoading, error } = fetchState;\r\n  // Data that can be gotten from this custom hook\r\n  return { isLoading, error, closeModal, fetchRequest };\r\n};\r\nexport default useFetch;"],"mappings":"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"},"metadata":{},"sourceType":"module"}